{
  "message": "I'll build a simplified workflow that extracts all Airtable records upfront and searches in memory, avoiding complex UI search interactions.",
  "toolCalls": [
    {
      "toolCallId": "mock_workflow_5",
      "toolName": "create_workflow_sequence",
      "result": {
        "nodes": [
          {
            "type": "context",
            "config": {
              "operation": "set",
              "key": "gmail_creds",
              "value": {
                "email": "michaelburner595@gmail.com",
                "password": "dCdWqhgPzJev6Jz"
              }
            },
            "description": "Store Gmail credentials securely"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "navigate",
              "url": "https://mail.google.com"
            },
            "description": "Navigate to Gmail"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "wait",
              "duration": 2000
            },
            "description": "Wait for Gmail to load"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Check if Gmail inbox is visible (user is already logged in) by looking for compose button or inbox messages",
              "schema": {
                "inboxVisible": "boolean"
              }
            },
            "description": "Check if already logged into Gmail"
          },
          {
            "type": "route",
            "config": {
              "value": "node4.inboxVisible",
              "paths": {
                "false": [
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "type",
                      "selector": ["input[type='email']", "input[name='identifier']", "#identifierId"],
                      "text": "{{gmail_creds.email}}"
                    },
                    "description": "Enter email address"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "click",
                      "selector": ["#identifierNext", "button:contains('Next')", "[data-idom-class='nCP5yc AjY5Oe DuMIQc LQeN7 qIypjc TrZEUc lw1w4b']"]
                    },
                    "description": "Click Next after email"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 2000
                    },
                    "description": "Wait for password page"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "type",
                      "selector": ["input[type='password']", "input[name='password']", "#password input", "input[name='Passwd']"],
                      "text": "{{gmail_creds.password}}"
                    },
                    "description": "Enter password"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "click",
                      "selector": ["#passwordNext", "button:contains('Next')", "[data-idom-class='nCP5yc AjY5Oe DuMIQc LQeN7 qIypjc TrZEUc lw1w4b']"]
                    },
                    "description": "Click Next after password"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 3000
                    },
                    "description": "Wait for login to complete"
                  }
                ],
                "true": []
              }
            },
            "description": "Route based on Gmail login status"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Verify Gmail inbox is now visible and loaded",
              "schema": {
                "loginSuccess": "boolean"
              }
            },
            "description": "Verify Gmail login success"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "openNewTab",
              "url": "https://airtable.com/appTnT68Rt8yHIGV3",
              "name": "airtable"
            },
            "description": "Open Airtable in new tab"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "wait",
              "duration": 3000
            },
            "description": "Wait for Airtable to load"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Check if Airtable is showing a login screen with 'Continue with Google' button or if user is already logged in",
              "schema": {
                "needsLogin": "boolean"
              }
            },
            "description": "Check Airtable login status"
          },
          {
            "type": "route",
            "config": {
              "value": "node15.needsLogin",
              "paths": {
                "true": [
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "click",
                      "selector": ["button:contains('Continue with Google')", "text=Continue with Google", "act:click the Continue with Google button"]
                    },
                    "description": "Click Continue with Google"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 2000
                    },
                    "description": "Wait for Google account chooser"
                  },
                  {
                    "type": "browser_query",
                    "config": {
                      "method": "extract",
                      "instruction": "Check if Google account chooser is shown with the michaelburner595@gmail.com account",
                      "schema": {
                        "accountChooserVisible": "boolean"
                      }
                    },
                    "description": "Check for account chooser"
                  },
                  {
                    "type": "route",
                    "config": {
                      "value": "node19.accountChooserVisible",
                      "paths": {
                        "true": [
                          {
                            "type": "browser_action",
                            "config": {
                              "action": "click",
                              "selector": ["div:contains('michaelburner595@gmail.com')", "[data-identifier='michaelburner595@gmail.com']", "act:click on the michaelburner595@gmail.com account"]
                            },
                            "description": "Select Gmail account"
                          }
                        ],
                        "false": []
                      }
                    },
                    "description": "Handle account selection if needed"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 4000
                    },
                    "description": "Wait for Airtable to load after login"
                  }
                ],
                "false": []
              }
            },
            "description": "Route based on Airtable login status"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Extract all visible investor records from the Airtable grid. For each row, get the Name, Company, Email, Stage, Last Contact date, and any CSS selector to click on the record. Only extract actual data visible on screen.",
              "schema": {
                "investors": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": "string",
                      "company": "string",
                      "email": "string",
                      "stage": "string",
                      "lastContact": "string",
                      "selector": "string"
                    }
                  }
                }
              }
            },
            "description": "Extract all visible investor records"
          },
          {
            "type": "context",
            "config": {
              "operation": "set",
              "key": "airtable_investors",
              "value": "{{node23.investors}}"
            },
            "description": "Store Airtable investors in context"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "switchTab",
              "tabName": "main"
            },
            "description": "Switch back to Gmail tab"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "act",
              "instruction": "Click on the search bar and type 'after:2025/06/02 before:2025/06/03' to filter emails from June 2nd, 2025, then press Enter"
            },
            "description": "Filter emails to show only June 2nd"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "wait",
              "duration": 2000
            },
            "description": "Wait for search results to load"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Extract all emails shown (filtered for June 2nd). For each email, get the sender name, sender email, subject, snippet of content, and a CSS selector to click on it. Only extract emails actually visible on the page.",
              "schema": {
                "emails": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "senderName": "string",
                      "senderEmail": "string",
                      "subject": "string",
                      "snippet": "string",
                      "date": "string",
                      "selector": "string"
                    }
                  }
                }
              }
            },
            "description": "Extract all emails from June 2nd"
          },
          {
            "type": "iterate",
            "config": {
              "over": "node27.emails",
              "variable": "email",
              "body": [
                {
                  "type": "browser_action",
                  "config": {
                    "action": "click",
                    "selector": "{{email.selector}}"
                  },
                  "description": "Click on email thread to open it"
                },
                {
                  "type": "browser_action",
                  "config": {
                    "action": "wait",
                    "duration": 3000
                  },
                  "description": "Wait for email content to fully load"
                },
                {
                  "type": "browser_query",
                  "config": {
                    "method": "extract",
                    "instruction": "Extract the full email content including sender name, sender email address, subject line, and complete body text. Also analyze if this email is investor-related (from VCs, funds, angels, or mentions investment/funding)",
                    "schema": {
                      "senderName": "string",
                      "senderEmail": "string",
                      "subject": "string",
                      "bodyText": "string",
                      "isInvestorRelated": "boolean",
                      "investorCompany": "string",
                      "investmentStage": "string"
                    }
                  },
                  "description": "Extract email details and classify"
                },
                {
                  "type": "route",
                  "config": {
                    "value": "node31.isInvestorRelated",
                    "paths": {
                      "false": [
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "back"
                          },
                          "description": "Use browser back to return to inbox"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "wait",
                            "duration": 1500
                          },
                          "description": "Wait for inbox to reload"
                        }
                      ],
                      "true": [
                        {
                          "type": "cognition",
                          "config": {
                            "prompt": "Check if this investor exists in our Airtable records. Search by email ({{node31.senderEmail}}), company ({{node31.investorCompany}}), or name ({{node31.senderName}}). Return the matching investor record if found.\n\nAirtable investors: {{airtable_investors}}",
                            "output": "investorMatch",
                            "schema": {
                              "found": "boolean",
                              "matchedInvestor": "object",
                              "matchField": "string"
                            }
                          },
                          "description": "Check if investor exists in Airtable"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "switchTab",
                            "tabName": "airtable"
                          },
                          "description": "Switch to Airtable tab"
                        },
                        {
                          "type": "route",
                          "config": {
                            "value": "investorMatch.found",
                            "paths": {
                              "true": [
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "click",
                                    "selector": "{{investorMatch.matchedInvestor.selector}}"
                                  },
                                  "description": "Click on existing investor record"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1500
                                  },
                                  "description": "Wait for record to open"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Update the Last Contact field to '06/02/2025'"
                                  },
                                  "description": "Update last contact date"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Click on the Notes field and append: '\n\n[2025-06-02] Email: {{node31.subject}}'"
                                  },
                                  "description": "Append to notes"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Escape"
                                  },
                                  "description": "Close record"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1000
                                  },
                                  "description": "Wait"
                                }
                              ],
                              "false": [
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "click",
                                    "selector": ["button[aria-label='Add record']", "[data-tutorial-selector-id='gridView-addRecordButton']", ".addRecordButton"]
                                  },
                                  "description": "Click + to add record"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1500
                                  },
                                  "description": "Wait for new record form"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "type",
                                    "selector": ["input[placeholder='Name']", ".cell-edit input:first"],
                                    "text": "{{node31.senderName}}"
                                  },
                                  "description": "Enter name"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Tab"
                                  },
                                  "description": "Tab to company"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "type",
                                    "text": "{{node31.investorCompany}}"
                                  },
                                  "description": "Enter company"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Tab"
                                  },
                                  "description": "Tab to email"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "type",
                                    "text": "{{node31.senderEmail}}"
                                  },
                                  "description": "Enter email"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Tab"
                                  },
                                  "description": "Tab to stage"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "type",
                                    "text": "Lead"
                                  },
                                  "description": "Set stage"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Tab"
                                  },
                                  "description": "Tab to last contact"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "type",
                                    "text": "06/02/2025"
                                  },
                                  "description": "Enter date"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Tab"
                                  },
                                  "description": "Tab to notes"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "type",
                                    "text": "[2025-06-02] Initial contact: {{node31.subject}}"
                                  },
                                  "description": "Enter notes"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "keypress",
                                    "key": "Enter"
                                  },
                                  "description": "Save record"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1500
                                  },
                                  "description": "Wait for save"
                                }
                              ]
                            }
                          },
                          "description": "Update or create investor record"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "switchTab",
                            "tabName": "main"
                          },
                          "description": "Switch back to Gmail"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "back"
                          },
                          "description": "Return to inbox"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "wait",
                            "duration": 1500
                          },
                          "description": "Wait for inbox"
                        }
                      ]
                    }
                  },
                  "description": "Route based on investor classification"
                }
              ],
              "continueOnError": true
            },
            "description": "Process each email from June 2nd"
          },
          {
            "type": "context",
            "config": {
              "operation": "set",
              "key": "workflow_complete",
              "value": true
            },
            "description": "Mark workflow as complete"
          }
        ]
      }
    }
  ]
}