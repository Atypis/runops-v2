{
  "message": "I'll build a complete workflow to process Gmail investor emails and update Airtable CRM with precise back navigation and record handling. Let me create a bulletproof implementation.",
  "toolCalls": [
    {
      "toolCallId": "mock_workflow_1",
      "toolName": "create_workflow_sequence",
      "result": {
        "nodes": [
          {
            "type": "context",
            "config": {
              "operation": "set",
              "key": "gmail_creds",
              "value": {
                "email": "michaelburner595@gmail.com",
                "password": "dCdWqhgPzJev6Jz"
              }
            },
            "description": "Store Gmail credentials securely"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "navigate",
              "url": "https://mail.google.com"
            },
            "description": "Navigate to Gmail"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "wait",
              "duration": 2000
            },
            "description": "Wait for Gmail to load"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Check if Gmail inbox is visible (user is already logged in) by looking for compose button or inbox messages",
              "schema": {
                "inboxVisible": "boolean"
              }
            },
            "description": "Check if already logged into Gmail"
          },
          {
            "type": "route",
            "config": {
              "value": "node4.inboxVisible",
              "paths": {
                "false": [
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "type",
                      "selector": ["input[type='email']", "input[name='identifier']", "#identifierId"],
                      "text": "{{gmail_creds.email}}"
                    },
                    "description": "Enter email address"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "click",
                      "selector": ["#identifierNext", "button:contains('Next')", "[data-idom-class='nCP5yc AjY5Oe DuMIQc LQeN7 qIypjc TrZEUc lw1w4b']"]
                    },
                    "description": "Click Next after email"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 2000
                    },
                    "description": "Wait for password page"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "type",
                      "selector": ["input[type='password']", "input[name='password']", "#password input", "input[name='Passwd']"],
                      "text": "{{gmail_creds.password}}"
                    },
                    "description": "Enter password"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "click",
                      "selector": ["#passwordNext", "button:contains('Next')", "[data-idom-class='nCP5yc AjY5Oe DuMIQc LQeN7 qIypjc TrZEUc lw1w4b']"]
                    },
                    "description": "Click Next after password"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 3000
                    },
                    "description": "Wait for login to complete"
                  }
                ],
                "true": []
              }
            },
            "description": "Route based on Gmail login status"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Verify Gmail inbox is now visible and loaded",
              "schema": {
                "loginSuccess": "boolean"
              }
            },
            "description": "Verify Gmail login success"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "openNewTab",
              "url": "https://airtable.com/appTnT68Rt8yHIGV3",
              "name": "airtable"
            },
            "description": "Open Airtable in new tab"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "wait",
              "duration": 3000
            },
            "description": "Wait for Airtable to load"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Check if Airtable is showing a login screen with 'Continue with Google' button or if user is already logged in",
              "schema": {
                "needsLogin": "boolean"
              }
            },
            "description": "Check Airtable login status"
          },
          {
            "type": "route",
            "config": {
              "value": "node15.needsLogin",
              "paths": {
                "true": [
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "click",
                      "selector": ["button:contains('Continue with Google')", "text=Continue with Google", "act:click the Continue with Google button"]
                    },
                    "description": "Click Continue with Google"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 2000
                    },
                    "description": "Wait for Google account chooser"
                  },
                  {
                    "type": "browser_query",
                    "config": {
                      "method": "extract",
                      "instruction": "Check if Google account chooser is shown with the michaelburner595@gmail.com account",
                      "schema": {
                        "accountChooserVisible": "boolean"
                      }
                    },
                    "description": "Check for account chooser"
                  },
                  {
                    "type": "route",
                    "config": {
                      "value": "node19.accountChooserVisible",
                      "paths": {
                        "true": [
                          {
                            "type": "browser_action",
                            "config": {
                              "action": "click",
                              "selector": ["div:contains('michaelburner595@gmail.com')", "[data-identifier='michaelburner595@gmail.com']", "act:click on the michaelburner595@gmail.com account"]
                            },
                            "description": "Select Gmail account"
                          }
                        ],
                        "false": []
                      }
                    },
                    "description": "Handle account selection if needed"
                  },
                  {
                    "type": "browser_action",
                    "config": {
                      "action": "wait",
                      "duration": 4000
                    },
                    "description": "Wait for Airtable to load after login"
                  }
                ],
                "false": []
              }
            },
            "description": "Route based on Airtable login status"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Verify that Airtable Investor Relationship Management table is now visible",
              "schema": {
                "airtableReady": "boolean"
              }
            },
            "description": "Verify Airtable is ready"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "switchTab",
              "tabName": "main"
            },
            "description": "Switch back to Gmail tab"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "act",
              "instruction": "Click on the search bar and type 'after:2025/06/02 before:2025/06/03' to filter emails from June 2nd, 2025, then press Enter"
            },
            "description": "Filter emails to show only June 2nd"
          },
          {
            "type": "browser_action",
            "config": {
              "action": "wait",
              "duration": 2000
            },
            "description": "Wait for search results to load"
          },
          {
            "type": "browser_query",
            "config": {
              "method": "extract",
              "instruction": "Extract all emails shown (filtered for June 2nd). For each email, get the sender name, sender email, subject, snippet of content, and a CSS selector to click on it. IMPORTANT: Only extract emails that are actually visible on the page. Do not make up or generate example data. Return empty array if no emails are found.",
              "schema": {
                "emails": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "senderName": "string",
                      "senderEmail": "string",
                      "subject": "string",
                      "snippet": "string",
                      "date": "string",
                      "selector": "string"
                    }
                  }
                }
              }
            },
            "description": "Extract all emails from June 2nd"
          },
          {
            "type": "iterate",
            "config": {
              "over": "node27.emails",
              "variable": "email",
              "body": [
                {
                  "type": "browser_action",
                  "config": {
                    "action": "click",
                    "selector": "{{email.selector}}"
                  },
                  "description": "Click on email thread to open it"
                },
                {
                  "type": "browser_action",
                  "config": {
                    "action": "wait",
                    "duration": 3000
                  },
                  "description": "Wait for email content to fully load"
                },
                {
                  "type": "browser_query",
                  "config": {
                    "method": "extract",
                    "instruction": "Extract the full email content including sender name, sender email address, subject line, and complete body text. Also analyze if this email is investor-related (from VCs, funds, angels, or mentions investment/funding)",
                    "schema": {
                      "senderName": "string",
                      "senderEmail": "string",
                      "subject": "string",
                      "bodyText": "string",
                      "isInvestorRelated": "boolean",
                      "investorCompany": "string",
                      "investmentStage": "string"
                    }
                  },
                  "description": "Extract email details and classify"
                },
                {
                  "type": "route",
                  "config": {
                    "value": "node31.isInvestorRelated",
                    "paths": {
                      "false": [
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "act",
                            "instruction": "Click the back arrow button in Gmail to return to the inbox list"
                          },
                          "description": "Return to inbox for non-investor email"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "wait",
                            "duration": 1000
                          },
                          "description": "Wait for inbox to reload"
                        }
                      ],
                      "true": [
                        {
                          "type": "context",
                          "config": {
                            "operation": "set",
                            "key": "currentEmail",
                            "value": {
                              "senderName": "{{node31.senderName}}",
                              "senderEmail": "{{node31.senderEmail}}",
                              "company": "{{node31.investorCompany}}",
                              "subject": "{{node31.subject}}",
                              "content": "{{node31.bodyText}}",
                              "stage": "{{node31.investmentStage}}",
                              "date": "2025-06-02"
                            }
                          },
                          "description": "Store current investor email data"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "switchTab",
                            "tabName": "airtable"
                          },
                          "description": "Switch to Airtable tab"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "act",
                            "instruction": "Click on the search bar at the top of Airtable and search for '{{currentEmail.company}}' or '{{currentEmail.senderEmail}}'"
                          },
                          "description": "Search for existing investor record"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "wait",
                            "duration": 1500
                          },
                          "description": "Wait for search results"
                        },
                        {
                          "type": "browser_query",
                          "config": {
                            "method": "extract",
                            "instruction": "Check if any records appear in the search results matching the investor",
                            "schema": {
                              "recordFound": "boolean",
                              "recordSelector": "string"
                            }
                          },
                          "description": "Check if investor record exists"
                        },
                        {
                          "type": "route",
                          "config": {
                            "value": "node37.recordFound",
                            "paths": {
                              "true": [
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "click",
                                    "selector": "{{node37.recordSelector}}"
                                  },
                                  "description": "Click on existing record to open it"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1000
                                  },
                                  "description": "Wait for record to open"
                                },
                                {
                                  "type": "browser_query",
                                  "config": {
                                    "method": "extract",
                                    "instruction": "Extract current values from the record: Stage field, Last Contact date, and Notes field content",
                                    "schema": {
                                      "currentStage": "string",
                                      "lastContactDate": "string",
                                      "currentNotes": "string"
                                    }
                                  },
                                  "description": "Read current record values"
                                },
                                {
                                  "type": "cognition",
                                  "config": {
                                    "prompt": "Compare the email data with current record values. Determine: 1) If Last Contact should be updated to June 2nd, 2) If Stage should change based on email content, 3) Create a summary to append to Notes",
                                    "input": {
                                      "email": "currentEmail",
                                      "record": "node40"
                                    },
                                    "output": "updateDecision",
                                    "schema": {
                                      "updateLastContact": "boolean",
                                      "updateStage": "boolean",
                                      "newStage": "string",
                                      "noteSummary": "string"
                                    }
                                  },
                                  "description": "Determine what to update"
                                },
                                {
                                  "type": "route",
                                  "config": {
                                    "value": "updateDecision.updateLastContact",
                                    "paths": {
                                      "true": [
                                        {
                                          "type": "browser_action",
                                          "config": {
                                            "action": "act",
                                            "instruction": "Click on the Last Contact field and update it to 06/02/2025"
                                          },
                                          "description": "Update Last Contact date"
                                        }
                                      ],
                                      "false": []
                                    }
                                  },
                                  "description": "Update Last Contact if needed"
                                },
                                {
                                  "type": "route",
                                  "config": {
                                    "value": "updateDecision.updateStage",
                                    "paths": {
                                      "true": [
                                        {
                                          "type": "browser_action",
                                          "config": {
                                            "action": "act",
                                            "instruction": "Click on the Stage field and update it to '{{updateDecision.newStage}}'"
                                          },
                                          "description": "Update Stage if needed"
                                        }
                                      ],
                                      "false": []
                                    }
                                  },
                                  "description": "Update Stage if needed"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Click on the Notes field and append this text at the end: '\n\n[2025-06-02] {{updateDecision.noteSummary}}'"
                                  },
                                  "description": "Append email summary to Notes"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Press ESC key to close the record view and save changes"
                                  },
                                  "description": "Close record with ESC"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1000
                                  },
                                  "description": "Wait for record to close"
                                }
                              ],
                              "false": [
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Click the '+' button in the Airtable toolbar to add a new record"
                                  },
                                  "description": "Click + to add new record"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1000
                                  },
                                  "description": "Wait for new record form"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Fill in the Name field with '{{currentEmail.senderName}}'"
                                  },
                                  "description": "Enter investor name"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Fill in the Email field with '{{currentEmail.senderEmail}}'"
                                  },
                                  "description": "Enter investor email"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Fill in the Company field with '{{currentEmail.company}}'"
                                  },
                                  "description": "Enter investor company"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Set the Stage field to '{{currentEmail.stage}}' or 'Lead' if not specified"
                                  },
                                  "description": "Set initial stage"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Set the Last Contact field to 06/02/2025"
                                  },
                                  "description": "Set Last Contact date"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Fill the Notes field with '[2025-06-02] Email: {{currentEmail.subject}} - {{currentEmail.content}}' (truncate if too long)"
                                  },
                                  "description": "Add initial notes"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "act",
                                    "instruction": "Click outside the form or press Enter to save the new record"
                                  },
                                  "description": "Save new record"
                                },
                                {
                                  "type": "browser_action",
                                  "config": {
                                    "action": "wait",
                                    "duration": 1000
                                  },
                                  "description": "Wait for record to save"
                                }
                              ]
                            }
                          },
                          "description": "Handle existing vs new investor record"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "switchTab",
                            "tabName": "main"
                          },
                          "description": "Switch back to Gmail tab"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "act",
                            "instruction": "Click the back arrow button in Gmail to return to the inbox list"
                          },
                          "description": "Return to inbox after processing"
                        },
                        {
                          "type": "browser_action",
                          "config": {
                            "action": "wait",
                            "duration": 1000
                          },
                          "description": "Wait for inbox to reload"
                        }
                      ]
                    }
                  },
                  "description": "Route based on investor classification"
                }
              ],
              "continueOnError": true
            },
            "description": "Process each email from June 2nd"
          },
          {
            "type": "context",
            "config": {
              "operation": "set",
              "key": "workflow_complete",
              "value": true
            },
            "description": "Mark workflow as complete"
          }
        ]
      }
    }
  ]
}