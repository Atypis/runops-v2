<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEF Credential Indicators Test Guide</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
        .step { background: #f4f4f4; padding: 15px; margin: 15px 0; border-left: 4px solid #007cba; }
        .note { background: #fff3cd; padding: 10px; border-left: 4px solid #ffc107; margin: 10px 0; }
        .success { background: #d4edda; padding: 10px; border-left: 4px solid #28a745; margin: 10px 0; }
        .error { background: #f8d7da; padding: 10px; border-left: 4px solid #dc3545; margin: 10px 0; }
        code { background: #f1f1f1; padding: 2px 4px; border-radius: 3px; }
        .url { background: #e3f2fd; padding: 8px; border-radius: 4px; font-family: monospace; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>üîê AEF Credential Indicators - Test Guide</h1>
    
    <p>This guide shows you how to see the new visual credential indicators integrated into the AEF execution interface.</p>
    
    <div class="success">
        <strong>‚úÖ Integration Complete!</strong><br>
        The credential indicators are now fully integrated into the AEF Control Center and ExecutionPanel.
    </div>

    <h2>üéØ What's Been Added</h2>
    
    <div class="step">
        <h3>1. Overall Credential Status</h3>
        <p>At the top of the ExecutionPanel (left side of AEF interface), you'll see:</p>
        <ul>
            <li><strong>Overall credential status panel</strong> showing total progress (e.g. "2/4 credentials configured")</li>
            <li><strong>Color-coded status</strong>: Red (missing), Yellow (partial), Green (complete)</li>
            <li><strong>Real-time updates</strong> from Supabase as you configure credentials</li>
        </ul>
    </div>
    
    <div class="step">
        <h3>2. Individual Step Indicators</h3>
        <p>On each workflow step that requires credentials, you'll see:</p>
        <ul>
            <li><strong>Credential badges</strong> next to the step function name</li>
            <li><strong>Status indicators</strong> showing configured vs required (e.g. "1/2")</li>
            <li><strong>Visual cues</strong>: üîí for missing, üîë for partial, üõ°Ô∏è for complete</li>
        </ul>
    </div>

    <h2>üß™ How to Test</h2>
    
    <div class="step">
        <h3>Step 1: Access AEF Interface</h3>
        <p>Navigate to any SOP in the AEF interface:</p>
        <div class="url">http://localhost:3000/sop/gmail-investor-crm</div>
        <div class="note">
            <strong>Note:</strong> Make sure you're in the main AEF execution interface, not the old flow visualization.
        </div>
    </div>
    
    <div class="step">
        <h3>Step 2: Look for Overall Status</h3>
        <p>In the left panel (ExecutionPanel), look for:</p>
        <ul>
            <li>Terminal header area with workflow path</li>
            <li>Overall credential status panel showing total progress</li>
            <li>Should show something like: <code>"Credentials Required: 0/4 configured"</code></li>
        </ul>
    </div>
    
    <div class="step">
        <h3>Step 3: Find Step Indicators</h3>
        <p>Look at individual workflow steps, you should see:</p>
        <ul>
            <li>Steps with function names like <code>gmail_login_flow()</code></li>
            <li>Credential indicators next to steps that need authentication</li>
            <li>Badge format: <code>üîí 0/2</code> (missing credentials)</li>
        </ul>
    </div>
    
    <div class="step">
        <h3>Step 4: Configure Credentials</h3>
        <p>Use the credential panels to add credentials:</p>
        <ul>
            <li>Click credential management buttons in the interface</li>
            <li>Add Gmail email/password or other required credentials</li>
            <li>Watch indicators update in real-time</li>
        </ul>
    </div>

    <h2>üîç Expected Results</h2>
    
    <div class="success">
        <h3>Gmail Investor CRM Workflow</h3>
        <p>For the Gmail Investor CRM workflow, you should see:</p>
        <ul>
            <li><strong>4 nodes requiring credentials:</strong>
                <ul>
                    <li><code>gmail_login_flow</code> - needs gmail email/password</li>
                    <li><code>enter_email</code> - needs gmail email</li>
                    <li><code>enter_password</code> - needs gmail password</li>
                    <li><code>open_airtable</code> - needs airtable credentials</li>
                </ul>
            </li>
            <li><strong>4 unique credentials required:</strong>
                <ul>
                    <li><code>gmail_email</code></li>
                    <li><code>gmail_password</code></li>
                    <li><code>airtable_api_key</code></li>
                    <li><code>airtable_base_id</code></li>
                </ul>
            </li>
            <li><strong>Overall status:</strong> "0/4 configured" initially</li>
        </ul>
    </div>

    <h2>üêõ Troubleshooting</h2>
    
    <div class="error">
        <h3>If you don't see indicators:</h3>
        <ul>
            <li><strong>Check URL:</strong> Make sure you're at <code>/sop/[sopId]</code> not <code>/sop/[sopId]?view=flow</code></li>
            <li><strong>Check console:</strong> Open browser dev tools for any errors</li>
            <li><strong>Refresh page:</strong> Hard refresh (Cmd+Shift+R / Ctrl+Shift+R)</li>
            <li><strong>Check workflow:</strong> Ensure the SOP has credential requirements in its JSON</li>
        </ul>
    </div>
    
    <div class="note">
        <h3>Development Notes</h3>
        <ul>
            <li>Indicators use the <code>useCredentialStatus</code> hook for real-time updates</li>
            <li>Credential extraction uses 3 methods: declarations, fields, and placeholders</li>
            <li>Status syncs with Supabase user_credentials table</li>
            <li>Supports both workflow-specific and global credentials</li>
        </ul>
    </div>

    <h2>‚ú® Next Steps</h2>
    
    <div class="step">
        <p>Now that visual indicators are working, the next features to implement would be:</p>
        <ul>
            <li><strong>Feature 2:</strong> Real-time streaming of authentication status from Supabase</li>
            <li><strong>Feature 3:</strong> Handling unknown authentication methods from AI-generated SOPs</li>
        </ul>
    </div>

    <hr>
    <p><em>Generated: December 2024 | AEF Credential System v1.0</em></p>
</body>
</html> 