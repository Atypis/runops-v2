{
  "meta": {
    "id": "mocksop-reactflow",
    "title": "Daily Investor Email Processing and CRM Update (ReactFlow Version)",
    "version": "1.0.0",
    "goal": "To review daily emails for investor-related communications and update the Airtable CRM accordingly.",
    "purpose": "Ensures timely tracking of investor interactions, maintains an up-to-date CRM, and supports fundraising efforts by keeping all investor communication logged and actionable."
  },
  "public": {
    "triggers": [
      {
        "type": "cron",
        "config": "0 20 * * *",
        "description": "Daily at 8PM"
      }
    ],
    "nodes": [
      {
        "id": "T0_open_gmail",
        "type": "task",
        "label": "Open Gmail Inbox",
        "intent": "Access emails to begin the review process."
      },
      {
        "id": "L1_process_emails",
        "type": "loop",
        "label": "Process Daily Emails",
        "iterator": "email_in_inbox",
        "context": "Iterate through all emails received for the day.",
        "exit_condition": "All emails for the day processed",
        "children": [
          "L1_process_gmail",
          "L1_process_airtable"
        ]
      },
      {
        "id": "L1_process_gmail",
        "type": "loop",
        "label": "Email Processing Steps",
        "context": "Steps for processing the email content",
        "parentId": "L1_process_emails",
        "children": [
          "L1_C1_open_email",
          "L1_C2_review_email_content",
          "L1_D3_is_investor_email_decision"
        ]
      },
      {
        "id": "L1_C1_open_email",
        "type": "task",
        "label": "Open Next Email",
        "intent": "View the content of an individual email from the inbox list.",
        "parentId": "L1_process_gmail"
      },
      {
        "id": "L1_C2_review_email_content",
        "type": "task",
        "label": "Review Email Content",
        "intent": "Understand the email's sender, subject, body, and date.",
        "parentId": "L1_process_gmail"
      },
      {
        "id": "L1_D3_is_investor_email_decision",
        "type": "decision",
        "label": "Investor Related?",
        "intent": "Determine if the email pertains to investor relations.",
        "parentId": "L1_process_gmail"
      },
      {
        "id": "L1_process_airtable",
        "type": "loop",
        "label": "Airtable Update Steps",
        "context": "Steps for updating Airtable CRM",
        "parentId": "L1_process_emails",
        "children": [
          "L1_C4_open_airtable_or_switch_tab",
          "L1_C5_navigate_to_investor_db",
          "L1_C6_identify_investor_in_airtable",
          "L1_D7_record_exists_decision",
          "L1_record_exists_path",
          "L1_record_missing_path",
          "L1_C12_close_airtable_modal",
          "L1_C13_return_to_gmail_from_airtable"
        ]
      },
      {
        "id": "L1_C4_open_airtable_or_switch_tab",
        "type": "task",
        "label": "Open/Switch to Airtable",
        "intent": "Access the Airtable application.",
        "parentId": "L1_process_airtable"
      },
      {
        "id": "L1_C5_navigate_to_investor_db",
        "type": "task",
        "label": "Navigate to Investor DB",
        "intent": "Open the specific Investor Relationship Management base.",
        "parentId": "L1_process_airtable"
      },
      {
        "id": "L1_C6_identify_investor_in_airtable",
        "type": "task",
        "label": "Identify Investor in Airtable Grid",
        "intent": "Locate the investor's record in the Airtable grid view.",
        "parentId": "L1_process_airtable"
      },
      {
        "id": "L1_D7_record_exists_decision",
        "type": "decision",
        "label": "Airtable Record Exists?",
        "intent": "Determine if a record for the current investor already exists.",
        "parentId": "L1_process_airtable"
      },
      {
        "id": "L1_record_exists_path",
        "type": "loop",
        "label": "Update Existing Record",
        "context": "Steps for updating an existing investor record",
        "parentId": "L1_process_airtable",
        "children": [
          "L1_C8_open_existing_record_modal",
          "L1_C9_update_existing_record"
        ]
      },
      {
        "id": "L1_C8_open_existing_record_modal",
        "type": "task",
        "label": "Open Existing Investor Record",
        "intent": "View the full details of an existing investor record.",
        "parentId": "L1_record_exists_path"
      },
      {
        "id": "L1_C9_update_existing_record",
        "type": "loop",
        "label": "Update Record Fields",
        "intent": "Update fields in the existing record.",
        "parentId": "L1_record_exists_path",
        "children": [
          "L1_C9_A1_set_last_interaction_date",
          "L1_C9_A2_update_thread_summary",
          "L1_C9_A3_check_follow_up"
        ]
      },
      {
        "id": "L1_C9_A1_set_last_interaction_date",
        "type": "task",
        "label": "Set 'Last Interaction' date",
        "intent": "Update the date of the last contact.",
        "parentId": "L1_C9_update_existing_record"
      },
      {
        "id": "L1_C9_A2_update_thread_summary",
        "type": "task",
        "label": "Update 'Thread Summary / Notes'",
        "intent": "Add notes about the interaction.",
        "parentId": "L1_C9_update_existing_record"
      },
      {
        "id": "L1_C9_A3_check_follow_up",
        "type": "task",
        "label": "Set 'Follow-up Needed'",
        "intent": "Indicate if a follow-up action is required.",
        "parentId": "L1_C9_update_existing_record"
      },
      {
        "id": "L1_record_missing_path",
        "type": "loop",
        "label": "Create New Record",
        "context": "Steps for creating a new investor record",
        "parentId": "L1_process_airtable",
        "children": [
          "L1_C10_open_new_record_modal",
          "L1_C11_populate_new_record"
        ]
      },
      {
        "id": "L1_C10_open_new_record_modal",
        "type": "task",
        "label": "Open New Investor Record Modal",
        "intent": "Open a modal to create a new investor record.",
        "parentId": "L1_record_missing_path"
      },
      {
        "id": "L1_C11_populate_new_record",
        "type": "task",
        "label": "Populate New Airtable Record",
        "intent": "Fill in the details for a new investor record.",
        "parentId": "L1_record_missing_path"
      },
      {
        "id": "L1_C12_close_airtable_modal",
        "type": "task",
        "label": "Close Airtable Record Modal",
        "intent": "Save changes and return to the Airtable grid view.",
        "parentId": "L1_process_airtable"
      },
      {
        "id": "L1_C13_return_to_gmail_from_airtable",
        "type": "task",
        "label": "Return to Gmail",
        "intent": "Navigate back to Gmail to process the next email.",
        "parentId": "L1_process_airtable"
      },
      {
        "id": "L1_C14_return_to_gmail_from_email_view",
        "type": "task",
        "label": "Return to Gmail Inbox",
        "intent": "Navigate back to the Gmail inbox for non-investor emails.",
        "parentId": "L1_process_emails"
      },
      {
        "id": "E_end_sop",
        "type": "end",
        "label": "End SOP",
        "intent": "All emails processed and CRM updated."
      }
    ],
    "edges": [
      {
        "source": "T0_open_gmail",
        "target": "L1_process_emails",
        "condition": "start"
      },
      {
        "source": "L1_process_emails",
        "target": "L1_process_gmail",
        "condition": "contains"
      },
      {
        "source": "L1_process_emails",
        "target": "L1_process_airtable",
        "condition": "contains"
      },
      {
        "source": "L1_process_gmail",
        "target": "L1_C1_open_email",
        "condition": "contains"
      },
      {
        "source": "L1_C1_open_email",
        "target": "L1_C2_review_email_content",
        "condition": "next"
      },
      {
        "source": "L1_C2_review_email_content",
        "target": "L1_D3_is_investor_email_decision",
        "condition": "next"
      },
      {
        "source": "L1_D3_is_investor_email_decision",
        "target": "L1_process_airtable",
        "condition": "yes"
      },
      {
        "source": "L1_D3_is_investor_email_decision",
        "target": "L1_C14_return_to_gmail_from_email_view",
        "condition": "no"
      },
      {
        "source": "L1_C14_return_to_gmail_from_email_view",
        "target": "L1_process_gmail",
        "condition": "next"
      },
      {
        "source": "L1_process_airtable",
        "target": "L1_C4_open_airtable_or_switch_tab",
        "condition": "contains"
      },
      {
        "source": "L1_C4_open_airtable_or_switch_tab",
        "target": "L1_C5_navigate_to_investor_db",
        "condition": "next"
      },
      {
        "source": "L1_C5_navigate_to_investor_db",
        "target": "L1_C6_identify_investor_in_airtable",
        "condition": "next"
      },
      {
        "source": "L1_C6_identify_investor_in_airtable",
        "target": "L1_D7_record_exists_decision",
        "condition": "next"
      },
      {
        "source": "L1_D7_record_exists_decision",
        "target": "L1_record_exists_path",
        "condition": "yes"
      },
      {
        "source": "L1_D7_record_exists_decision",
        "target": "L1_record_missing_path",
        "condition": "no"
      },
      {
        "source": "L1_record_exists_path",
        "target": "L1_C8_open_existing_record_modal",
        "condition": "contains"
      },
      {
        "source": "L1_C8_open_existing_record_modal",
        "target": "L1_C9_update_existing_record",
        "condition": "next"
      },
      {
        "source": "L1_C9_update_existing_record",
        "target": "L1_C9_A1_set_last_interaction_date",
        "condition": "contains"
      },
      {
        "source": "L1_C9_A1_set_last_interaction_date",
        "target": "L1_C9_A2_update_thread_summary",
        "condition": "next"
      },
      {
        "source": "L1_C9_A2_update_thread_summary",
        "target": "L1_C9_A3_check_follow_up",
        "condition": "next"
      },
      {
        "source": "L1_C9_update_existing_record",
        "target": "L1_C12_close_airtable_modal",
        "condition": "next"
      },
      {
        "source": "L1_record_missing_path",
        "target": "L1_C10_open_new_record_modal",
        "condition": "contains"
      },
      {
        "source": "L1_C10_open_new_record_modal",
        "target": "L1_C11_populate_new_record",
        "condition": "next"
      },
      {
        "source": "L1_C11_populate_new_record",
        "target": "L1_C12_close_airtable_modal",
        "condition": "next"
      },
      {
        "source": "L1_C12_close_airtable_modal",
        "target": "L1_C13_return_to_gmail_from_airtable",
        "condition": "next"
      },
      {
        "source": "L1_C13_return_to_gmail_from_airtable",
        "target": "L1_process_gmail",
        "condition": "next"
      },
      {
        "source": "L1_process_emails",
        "target": "E_end_sop",
        "condition": "complete"
      }
    ]
  }
} 